From d9d91c634b221b8389cfce94c9be0f8d9d2a66fc Mon Sep 17 00:00:00 2001
From: looooo <sppedflyer@gmail.com>
Date: Wed, 17 Aug 2016 08:30:48 +0200
Subject: [PATCH] patch to make netgen work with freecad:
 http://forum.freecadweb.org/viewtopic.php?f=17&p=127000#p126997

---
 libsrc/meshing/global.hpp    | 2 +-
 libsrc/meshing/meshclass.hpp | 4 ++--
 libsrc/meshing/meshtype.hpp  | 6 +++---
 libsrc/occ/occgenmesh.cpp    | 2 +-
 libsrc/occ/occgeom.hpp       | 8 ++++----
 5 files changed, 11 insertions(+), 11 deletions(-)

diff --git a/libsrc/meshing/global.hpp b/libsrc/meshing/global.hpp
index 776fd93..e6cb59d 100644
--- a/libsrc/meshing/global.hpp
+++ b/libsrc/meshing/global.hpp
@@ -31,7 +31,7 @@ namespace netgen
 
   DLL_HEADER extern mutex tcl_todo_mutex;
 
-  class multithreadt
+  class DLL_HEADER multithreadt
   {
   public:
     int pause;
diff --git a/libsrc/meshing/meshclass.hpp b/libsrc/meshing/meshclass.hpp
index 8d6ca79..40c3e01 100644
--- a/libsrc/meshing/meshclass.hpp
+++ b/libsrc/meshing/meshclass.hpp
@@ -318,7 +318,7 @@ namespace netgen
     { return lockedpoints; }
 
     /// Returns number of domains
-    int GetNDomains() const;
+    DLL_HEADER int GetNDomains() const;
 
     ///
     int GetDimension() const 
@@ -403,7 +403,7 @@ namespace netgen
     ///
 	DLL_HEADER void SetMaxHDomain (const Array<double> & mhd);
     ///
-    double GetH (const Point3d & p) const;
+    DLL_HEADER double GetH (const Point3d & p) const;
     ///
     double GetMinH (const Point3d & pmin, const Point3d & pmax);
     ///
diff --git a/libsrc/meshing/meshtype.hpp b/libsrc/meshing/meshtype.hpp
index 37b0846..216a6fa 100644
--- a/libsrc/meshing/meshtype.hpp
+++ b/libsrc/meshing/meshtype.hpp
@@ -668,7 +668,7 @@ namespace netgen
     /// Calculates Volume of elemenet
     double Volume (const T_POINTS & points) const;
     ///
-    void Print (ostream & ost) const;
+    DLL_HEADER void Print (ostream & ost) const;
     ///
     int GetNFaces () const
     {
@@ -1125,7 +1125,7 @@ namespace netgen
     ///
     MeshingParameters (const MeshingParameters & mp2) = default;
     ///
-    void Print (ostream & ost) const;
+    DLL_HEADER void Print (ostream & ost) const;
     /// 
     // void CopyFrom(const MeshingParameters & other);
     
@@ -1337,7 +1337,7 @@ namespace netgen
     /// remove secondorder
     void SetMaxPointNr (int maxpnum);
 
-    void Print (ostream & ost) const;
+    DLL_HEADER void Print (ostream & ost) const;
   };
 
 
diff --git a/libsrc/occ/occgenmesh.cpp b/libsrc/occ/occgenmesh.cpp
index 4b361ab..2cefacb 100644
--- a/libsrc/occ/occgenmesh.cpp
+++ b/libsrc/occ/occgenmesh.cpp
@@ -18,7 +18,7 @@ namespace netgen
 #define VSMALL 1e-10
 
 
-   bool merge_solids = 1;
+   DLL_HEADER bool merge_solids = 1;
 
 
   // can you please explain what you intend to compute here (JS) !!!
diff --git a/libsrc/occ/occgeom.hpp b/libsrc/occ/occgeom.hpp
index de725ef..49b1012 100644
--- a/libsrc/occ/occgeom.hpp
+++ b/libsrc/occ/occgeom.hpp
@@ -395,7 +395,7 @@ namespace netgen
 
 
 
-   class OCCParameters
+   class DLL_HEADER OCCParameters
    {
    public:
 
@@ -445,11 +445,11 @@ namespace netgen
 			       MeshingParameters & mparam,
 			       int perfstepsstart, int perfstepsend);
 
-  extern void OCCSetLocalMeshSize(OCCGeometry & geom, Mesh & mesh);
+   DLL_HEADER extern void OCCSetLocalMeshSize(OCCGeometry & geom, Mesh & mesh);
 
-   extern void OCCMeshSurface (OCCGeometry & geom, Mesh & mesh, int perfstepsend);
+   DLL_HEADER extern void OCCMeshSurface (OCCGeometry & geom, Mesh & mesh, int perfstepsend);
 
-   extern void OCCFindEdges (OCCGeometry & geom, Mesh & mesh);
+   DLL_HEADER extern void OCCFindEdges (OCCGeometry & geom, Mesh & mesh);
 }
 
 #endif
-- 
2.7.4

